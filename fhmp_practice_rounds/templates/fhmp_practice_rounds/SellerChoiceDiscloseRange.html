{% extends "global/Page.html" %}
{% load otree static %}

{% block title %}
Choose how to disclose the probability
{% endblock %}

{% block content %}
<table class="table">
	<tbody>
		<tr>
			<th scope="col">
				Likely value of your asset
			</th>
			<td>{{ asset_est_value }}</td>
		</tr>

		<tr>
			<th scope="col">
				Your budget
			</th>
			<td>{{ player.budget }}</td>
		</tr>
	</tbody>
</table>

<p>The most likely value of your asset is {{ asset_est_value }}. The actual value of your asset is determined by drawing
	from possible true values around {{ asset_est_value }}.
</p>

<!-- Show different text based on seller's reporting option -->
{% if asset_disclose_high %}
<p>You have chosen the <strong class="red">more precise</strong> reporting option.</p>
{% else %}
<p>You have chosen the <strong class="red">less precise</strong> reporting option.</p>
{% endif %}

<p>Please select an option. </p>

<!-- Show different radioboxes based on seller's reporting option -->
{% for field in form %}
<div class="controls">
	<ul>
		{% for choice in field %}
		{% if asset_disclose_high %}
		{% if 'High' in choice.data.label %}
		<li>{{ choice }}</li>
		{% endif %}
		{% else %}
		{% if 'Low' in choice.data.label %}
		<li>{{ choice }}</li>
		{% endif %}
		{% endif %}
		{% endfor %}
	</ul>
</div>
{% endfor %}

<script>
	$(function () {
		var textNodes = $('.controls ul li label')
			.contents()
			.filter(function () {
				return this.nodeType === 3; //Node.TEXT_NODE
			});

		Array.prototype.forEach.call(textNodes, function (el, idx) {
			el.nodeValue = el.nodeValue.replace('Low ', '').replace('High ', '');
		});
	});
</script>

{% next_button %}
{% endblock %}